<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
* { margin:0; padding:0; box-sizing:border-box; }

body {
    display:flex; justify-content:center; align-items:center;
    min-height:100vh; font-family:'Inter', sans-serif;
    background:#0b0f19; color:#f5f5f5; padding:10px;
}

.game-container { text-align:center; max-width:100%; position:relative; }

h1 {
    color:#60a5fa; margin-bottom:20px; font-size:2.5em;
    text-shadow:1px 1px 8px rgba(0,0,0,0.8);
}

.score-board {
    background: linear-gradient(145deg, rgba(96,165,250,0.3), rgba(96,165,250,0.6));
    color:#60a5fa; padding:12px 25px; margin-bottom:15px;
    border-radius:15px; font-size:1.3em; font-weight:700;
    display:inline-block; box-shadow:0 6px 15px rgba(0,0,0,0.4);
    transition: transform 0.2s;
}

.score-board:hover { transform: scale(1.05); }

canvas {
    background: #1f2937;
    border-radius:20px;
    border:4px solid #60a5fa;
    box-shadow:0 10px 25px rgba(0,0,0,0.6);
    max-width:100%; height:auto;
}

.mobile-controls { 
    margin-top:20px; 
    display:grid; 
    grid-template-columns: 70px 70px 70px; 
    grid-template-rows: 70px 70px 70px; 
    gap:12px; 
    justify-content:center; 
    align-items:center;
}

.control-btn { 
    background: rgba(96,165,250,0.2); color:#60a5fa; 
    border:2px solid #60a5fa; border-radius:50%; 
    font-size:2em; font-weight:bold; cursor:pointer; 
    transition: all 0.2s; display:flex; align-items:center; justify-content:center;
    box-shadow:0 4px 10px rgba(0,0,0,0.4);
}

.control-btn:active { background:#60a5fa; color:#0b0f19; transform:scale(0.95); }
.control-btn.center { background: rgba(0,0,0,0.5); border-color:#60a5fa; font-size:1em; cursor:default; }

@media (max-width:600px) { 
    h1{font-size:2em;} 
    canvas{width:100%; height:auto;} 
    .mobile-controls{grid-template-columns:60px 60px 60px; grid-template-rows:60px 60px 60px;} 
    .control-btn{font-size:1.5em;}
}
</style>
</head>
<body>

<div class="game-container">
    <h1>üêç SNAKE</h1>
    <div class="score-board">Score: <span id="score">0</span></div>
    <canvas id="gameCanvas" width="500" height="500"></canvas>

    <div class="mobile-controls">
        <div></div>
        <button class="control-btn up" id="btnUp">‚ñ≤</button>
        <div></div>
        <button class="control-btn left" id="btnLeft">‚óÑ</button>
        <div class="control-btn center">üêç</div>
        <button class="control-btn right" id="btnRight">‚ñ∫</button>
        <div></div>
        <button class="control-btn down" id="btnDown">‚ñº</button>
        <div></div>
    </div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreElement = document.getElementById('score');

const TILE_SIZE = 20, GRID_WIDTH = 25, GRID_HEIGHT = 25, GAME_SPEED = 100;
let snake = [], food = {}, direction = 'RIGHT', nextDirection = 'RIGHT', running = false, score = 0, gameLoop = null;

function init() {
    canvas.width = GRID_WIDTH * TILE_SIZE;
    canvas.height = GRID_HEIGHT * TILE_SIZE;
    setupMobileControls();
    startGame();
}

function setupMobileControls() {
    const btnUp = document.getElementById('btnUp');
    const btnDown = document.getElementById('btnDown');
    const btnLeft = document.getElementById('btnLeft');
    const btnRight = document.getElementById('btnRight');

    const setDir = (dir) => {
        if(running){
            if((dir==='UP' && direction!=='DOWN') ||
               (dir==='DOWN' && direction!=='UP') ||
               (dir==='LEFT' && direction!=='RIGHT') ||
               (dir==='RIGHT' && direction!=='LEFT')) nextDirection = dir;
        }
    }

    btnUp.addEventListener('click', ()=>setDir('UP'));
    btnDown.addEventListener('click', ()=>setDir('DOWN'));
    btnLeft.addEventListener('click', ()=>setDir('LEFT'));
    btnRight.addEventListener('click', ()=>setDir('RIGHT'));

    [btnUp,btnDown,btnLeft,btnRight].forEach(btn=>{
        btn.addEventListener('touchstart', e=>{ e.preventDefault(); btn.click(); });
    });
}

function startGame() {
    snake = [{x:5,y:5},{x:4,y:5},{x:3,y:5}];
    direction = 'RIGHT'; nextDirection = 'RIGHT'; score=0; running=true;
    updateScore(); spawnFood();
    if(gameLoop) clearInterval(gameLoop);
    gameLoop = setInterval(update, GAME_SPEED);
}

function spawnFood() {
    let valid = false;
    while(!valid){
        food = {x: Math.floor(Math.random()*GRID_WIDTH), y: Math.floor(Math.random()*GRID_HEIGHT)};
        valid = !snake.some(s=>s.x===food.x && s.y===food.y);
    }
}

function update() {
    if(!running) return;
    direction = nextDirection;
    const head = {...snake[0]};
    switch(direction){
        case 'UP': head.y--; break;
        case 'DOWN': head.y++; break;
        case 'LEFT': head.x--; break;
        case 'RIGHT': head.x++; break;
    }

    if(head.x<0 || head.x>=GRID_WIDTH || head.y<0 || head.y>=GRID_HEIGHT || snake.some(s=>s.x===head.x && s.y===head.y)){
        startGame(); // auto restart
        return;
    }

    snake.unshift(head);

    if(head.x===food.x && head.y===food.y){
        score += 10; updateScore(); spawnFood();
    } else {
        snake.pop();
    }

    draw();
}

function draw(){
    // Background grid
    ctx.fillStyle = '#1f2937';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.strokeStyle = '#111827';
    for(let i=0;i<=GRID_WIDTH;i++){
        ctx.beginPath(); ctx.moveTo(i*TILE_SIZE,0); ctx.lineTo(i*TILE_SIZE,canvas.height); ctx.stroke();
    }
    for(let j=0;j<=GRID_HEIGHT;j++){
        ctx.beginPath(); ctx.moveTo(0,j*TILE_SIZE); ctx.lineTo(canvas.width,j*TILE_SIZE); ctx.stroke();
    }

    // Food
    ctx.fillStyle = 'red';
    ctx.beginPath();
    ctx.arc(food.x*TILE_SIZE+TILE_SIZE/2, food.y*TILE_SIZE+TILE_SIZE/2, TILE_SIZE/2-2, 0, Math.PI*2);
    ctx.fill();

    // Snake
    snake.forEach((s,i)=>{
        ctx.fillStyle = i===0 ? '#7CFC00' : '#32CD32';
        ctx.beginPath();
        ctx.arc(s.x*TILE_SIZE+TILE_SIZE/2, s.y*TILE_SIZE+TILE_SIZE/2, TILE_SIZE/2-1, 0, Math.PI*2);
        ctx.fill();
    });
}

function updateScore(){ scoreElement.textContent = score; }

document.addEventListener('keydown', e=>{
    if(!running) return;
    switch(e.key){
        case 'ArrowUp': case 'w': case 'W': if(direction!=='DOWN') nextDirection='UP'; e.preventDefault(); break;
        case 'ArrowDown': case 's': case 'S': if(direction!=='UP') nextDirection='DOWN'; e.preventDefault(); break;
        case 'ArrowLeft': case 'a': case 'A': if(direction!=='RIGHT') nextDirection='LEFT'; e.preventDefault(); break;
        case 'ArrowRight': case 'd': case 'D': if(direction!=='LEFT') nextDirection='RIGHT'; e.preventDefault(); break;
    }
});

init();
</script>
</body>
</html>
